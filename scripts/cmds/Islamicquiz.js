module.exports.config = {
  name: "quiz",
  version: "1.0",
  author: "Md Apon + ChatGPT",
  cooldowns: 5,
  role: 0,
  description: "Islamic quiz with 150 questions",
};

const questions = [
  { question: "‡¶ï‡ßã‡¶® ‡¶Æ‡¶æ‡¶∏‡ßá ‡¶∞‡¶Æ‡¶ú‡¶æ‡¶® ‡¶™‡¶æ‡¶≤‡¶® ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º?", options: ["‡¶Æ‡ßÅ‡¶π‡¶∞‡¶∞‡¶Æ", "‡¶∞‡¶ú‡¶¨", "‡¶∞‡¶Æ‡¶ú‡¶æ‡¶®", "‡¶∂‡¶æ‡¶¨‡¶æ‡¶®"], answer: 3 },
  { question: "‡¶™‡¶æ‡¶Å‡¶ö ‡¶ì‡¶Ø‡¶º‡¶æ‡¶ï‡ßç‡¶§ ‡¶®‡¶æ‡¶Æ‡¶æ‡¶ú‡ßá‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶®‡¶æ‡¶Æ‡¶æ‡¶ú ‡¶ï‡ßã‡¶®‡¶ü‡¶ø?", options: ["‡¶ú‡ßã‡¶π‡¶∞", "‡¶´‡¶ú‡¶∞", "‡¶Ü‡¶∏‡¶∞", "‡¶Æ‡¶æ‡¶ó‡¶∞‡¶ø‡¶¨"], answer: 2 },
  { question: "‡¶á‡¶∏‡¶≤‡¶æ‡¶Æ‡ßá ‡¶ï‡¶§‡ßã ‡¶∞‡ßÅ‡¶ï‡¶® ‡¶Ü‡¶õ‡ßá?", options: ["‡ß´", "‡ß¨", "‡ß≠", "‡ßÆ"], answer: 1 },
  { question: "‡¶Æ‡¶π‡¶æ‡¶®‡¶¨‡ßÄ (‡¶∏‡¶æ:) ‡¶è‡¶∞ ‡¶™‡¶ø‡¶§‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ ‡¶ï‡¶ø?", options: ["‡¶Ü‡¶¨‡ßÅ ‡¶§‡¶æ‡¶≤‡¶ø‡¶¨", "‡¶Ü‡¶¨‡¶¶‡ßÅ‡¶≤‡ßç‡¶≤‡¶æ‡¶π", "‡¶Ü‡¶¨‡ßÅ ‡¶¨‡¶ï‡¶∞", "‡¶Ü‡¶≤‡¶ø"], answer: 2 },
  { question: "‡¶ï‡ßã‡¶®‡¶ü‡¶ø ‡¶á‡¶∏‡¶≤‡¶æ‡¶Æ‡ßá‡¶∞ ‡¶™‡¶û‡ßç‡¶ö‡¶∏‡ßç‡¶§‡¶Æ‡ßç‡¶≠‡ßá‡¶∞ ‡¶è‡¶ï‡¶ü‡¶ø?", options: ["‡¶π‡¶ú", "‡¶¨‡ßå‡¶¶‡ßç‡¶ß‡¶ß‡¶∞‡ßç‡¶Æ", "‡¶ñ‡ßç‡¶∞‡¶ø‡¶∏‡ßç‡¶ü‡¶æ‡¶® ‡¶ß‡¶∞‡ßç‡¶Æ", "‡¶π‡¶ø‡¶®‡ßç‡¶¶‡ßÅ‡¶ß‡¶∞‡ßç‡¶Æ"], answer: 1 },
  { question: "‡¶ï‡ßã‡¶® ‡¶Æ‡¶æ‡¶∏‡ßá ‡¶π‡¶ú ‡¶™‡¶æ‡¶≤‡¶® ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º?", options: ["‡¶ú‡¶ø‡¶≤‡¶ï‡¶¶", "‡¶ú‡ßÅ‡¶Æ‡¶æ‡¶¶‡ßÅ‡¶≤ ‡¶Ü‡¶â‡ßü‡¶æ‡¶≤", "‡¶∞‡¶ú‡¶¨", "‡¶Æ‡ßÅ‡¶π‡¶∞‡¶∞‡¶Æ"], answer: 1 },
  { question: "‡¶®‡¶æ‡¶Æ‡¶æ‡¶ú‡ßá‡¶∞ ‡¶ï‡¶§‡¶ü‡¶ø ‡¶´‡¶∞‡¶ú ‡¶∞‡¶æ‡¶ï‡¶æ‡¶§ ‡¶Ü‡¶õ‡ßá?", options: ["‡ß´", "‡ßß‡ß≠", "‡ß®‡ß¶", "‡ß≠"], answer: 2 },
  { question: "‡¶∏‡¶æ‡¶π‡¶æ‡¶¨‡ßÄ‡¶¶‡ßá‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶ñ‡¶≤‡¶ø‡¶´‡¶æ ‡¶ï‡ßá ‡¶õ‡¶ø‡¶≤‡ßá‡¶®?", options: ["‡¶Ö‡¶¨‡ßÅ ‡¶¨‡¶ï‡¶∞", "‡¶â‡¶Æ‡¶∞", "‡¶ì‡¶∏‡¶Æ‡¶æ‡¶®", "‡¶Ü‡¶≤‡ßÄ"], answer: 1 },
  { question: "‡¶á‡¶∏‡¶≤‡¶æ‡¶Æ‡ßá‡¶∞ ‡¶™‡¶¨‡¶ø‡¶§‡ßç‡¶∞ ‡¶ó‡ßç‡¶∞‡¶®‡ßç‡¶• ‡¶ï‡ßã‡¶®‡¶ü‡¶ø?", options: ["‡¶¨‡¶æ‡¶á‡¶¨‡ßá‡¶≤", "‡¶ï‡ßã‡¶∞‡¶Ü‡¶®", "‡¶¨‡ßá‡¶¶", "‡¶§‡ßå‡¶∞‡¶æ‡¶§"], answer: 2 },
  { question: "‡¶∞‡¶æ‡¶∏‡ßÇ‡¶≤‡ßÅ‡¶≤‡ßç‡¶≤‡¶æ‡¶π (‡¶∏‡¶æ:) ‡¶ï‡¶§ ‡¶¨‡¶õ‡¶∞ ‡¶¨‡¶Ø‡¶º‡¶∏‡ßá ‡¶®‡¶¨‡ßÅ‡¶Ø‡¶º‡¶§ ‡¶ó‡ßç‡¶∞‡¶π‡¶£ ‡¶ï‡¶∞‡ßá‡¶®?", options: ["‡ß©‡ß¶", "‡ß™‡ß¶", "‡ß´‡ß¶", "‡ß¨‡ß¶"], answer: 2 },
  { question: "‡¶ú‡ßÅ‡¶Æ‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ‡¶æ‡¶ú ‡¶ï‡¶¨‡ßá ‡¶™‡¶°‡¶º‡¶æ ‡¶π‡¶Ø‡¶º?", options: ["‡¶∂‡ßÅ‡¶ï‡ßç‡¶∞‡¶¨‡¶æ‡¶∞ ‡¶¶‡ßÅ‡¶™‡ßÅ‡¶∞", "‡¶∂‡¶®‡¶ø‡¶¨‡¶æ‡¶∞ ‡¶∏‡¶ï‡¶æ‡¶≤", "‡¶∞‡¶¨‡¶ø‡¶¨‡¶æ‡¶∞ ‡¶∏‡¶®‡ßç‡¶ß‡ßç‡¶Ø‡¶æ", "‡¶∏‡ßã‡¶Æ‡¶¨‡¶æ‡¶∞ ‡¶¨‡¶ø‡¶ï‡¶æ‡¶≤"], answer: 1 },
  { question: "‡¶ï‡ßã‡¶∞‡¶Ü‡¶®‡ßá‡¶∞ ‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶∏‡ßÇ‡¶∞‡¶æ ‡¶ï‡ßã‡¶®‡¶ü‡¶ø?", options: ["‡¶Ü‡¶≤ ‡¶´‡¶æ‡¶§‡¶ø‡¶π‡¶æ", "‡¶Ü‡¶≤ ‡¶¨‡¶æ‡¶ï‡¶æ‡¶∞‡¶æ", "‡¶Ü‡¶≤ ‡¶á‡¶ñ‡¶≤‡¶æ‡¶∏", "‡¶Ü‡¶≤ ‡¶´‡¶æ‡¶≤‡¶æ‡¶ï"], answer: 1 },
  { question: "‡¶ï‡ßã‡¶∞‡¶Ü‡¶®‡ßá ‡¶Æ‡ßã‡¶ü ‡¶ï‡¶§‡¶ü‡¶ø ‡¶∏‡ßÇ‡¶∞‡¶æ ‡¶Ü‡¶õ‡ßá?", options: ["‡ßß‡ßß‡ß™", "‡ßß‡ß®‡ß¶", "‡ßß‡ß¶‡ß¶", "‡ßØ‡ßØ"], answer: 1 },
  { question: "‡¶á‡¶∏‡¶≤‡¶æ‡¶Æ‡ßá‡¶∞ ‡¶∂‡ßá‡¶∑ ‡¶®‡¶¨‡ßÄ ‡¶ï‡ßá?", options: ["‡¶Æ‡ßã‡¶∏‡¶æ (‡¶Ü‡¶É)", "‡¶á‡¶∏‡¶æ (‡¶Ü‡¶É)", "‡¶Æ‡ßÅ‡¶π‡¶æ‡¶Æ‡ßç‡¶Æ‡¶¶ (‡¶∏‡¶æ:)", "‡¶á‡¶¨‡ßç‡¶∞‡¶æ‡¶π‡¶ø‡¶Æ (‡¶Ü‡¶É)"], answer: 3 },
  { question: "‡¶ú‡¶æ‡¶®‡¶æ‡¶ú‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ‡¶æ‡¶ú ‡¶ï‡¶§ ‡¶∞‡¶æ‡¶ï‡¶æ‡¶§?", options: ["‡ß®", "‡ß™", "‡ß©", "‡ßß"], answer: 1 },
  { question: "‡¶∞‡¶Æ‡¶ú‡¶æ‡¶®‡ßá‡¶∞ ‡¶á‡¶´‡¶§‡¶æ‡¶∞ ‡¶ï‡¶ñ‡¶® ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º?", options: ["‡¶Æ‡¶æ‡¶ó‡¶∞‡¶ø‡¶¨‡ßá‡¶∞ ‡¶Ü‡¶ó‡ßá", "‡¶Ü‡¶∏‡¶∞ ‡¶∂‡ßá‡¶∑‡ßá", "‡¶ú‡ßã‡¶π‡¶∞‡ßá‡¶∞ ‡¶™‡¶∞‡ßá", "‡¶á‡¶∂‡¶æ‡¶∞ ‡¶Ü‡¶ó‡ßá"], answer: 1 },
  { question: "‡¶∏‡¶æ‡¶ì‡¶Æ ‡¶Ö‡¶∞‡ßç‡¶• ‡¶ï‡¶ø?", options: ["‡¶¶‡ßã‡ßü‡¶æ", "‡¶∞‡ßã‡¶ú‡¶æ", "‡¶®‡¶æ‡¶Æ‡¶æ‡¶ú", "‡¶Ø‡¶æ‡¶ï‡¶æ‡¶§"], answer: 2 },
  { question: "‡¶®‡¶æ‡¶Æ‡¶æ‡¶ú‡ßá ‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶ï‡¶ø‡ßü‡¶æ‡¶Æ ‡¶Ö‡¶∞‡ßç‡¶• ‡¶ï‡¶ø?", options: ["‡¶â‡¶†‡ßá ‡¶¶‡¶æ‡¶Å‡ßú‡¶æ", "‡¶¨‡¶∏‡¶æ", "‡¶∞‡ßÅ‡¶ï‡ßÅ ‡¶ï‡¶∞‡¶æ", "‡¶∏‡¶æ‡¶ú‡¶¶‡¶æ ‡¶ï‡¶∞‡¶æ"], answer: 1 },
  { question: "‡¶ú‡¶æ‡¶®‡¶æ‡¶ú‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ‡¶æ‡¶ú‡ßá‡¶∞ ‡¶∂‡ßá‡¶∑‡¶§‡¶Æ ‡¶∏‡¶æ‡¶≤‡¶æ‡¶Æ ‡¶ï‡ßá‡¶Æ‡¶® ‡¶π‡ßü?", options: ["‡¶¨‡¶æ‡¶Æ ‡¶¶‡¶ø‡¶ï‡ßá", "‡¶°‡¶æ‡¶® ‡¶¶‡¶ø‡¶ï‡ßá", "‡¶Æ‡¶ß‡ßç‡¶Ø‡¶Æ", "‡¶∏‡ßã‡¶ú‡¶æ ‡¶∏‡¶æ‡¶Æ‡¶®‡ßá‡¶∞ ‡¶¶‡¶ø‡¶ï‡ßá"], answer: 2 },
  { question: "‡¶Ø‡¶æ‡¶ï‡¶æ‡¶§ ‡¶ï‡¶ø ‡¶ß‡¶∞‡¶®‡ßá‡¶∞ ‡¶´‡¶∞‡¶ú?", options: ["‡¶à‡¶Æ‡¶æ‡¶®‡ßá‡¶∞", "‡¶Ü‡¶ï‡ßÄ‡¶¶‡¶æ‡¶∞", "‡¶´‡¶ø‡¶≤‡¶æ‡¶≤‡ßá‡¶∞", "‡¶Ö‡¶∞‡ßç‡¶•‡ßá‡¶∞"], answer: 4 },
  //...‡¶è‡¶≠‡¶æ‡¶¨‡ßá ‡¶Ü‡¶∞‡¶ì ‡ßß‡ß©‡ß¶+ ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶® ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶§‡ßá ‡¶π‡¶¨‡ßá
];

// ‡ßß‡ß´‡ß¶ ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶®‡ßá‡¶∞ ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ ‡¶ñ‡ßÅ‡¶¨ ‡¶≤‡¶Æ‡ßç‡¶¨‡¶æ ‡¶π‡¶¨‡ßá, ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞ ‡ß®‡ß¶‡¶ü‡¶ø ‡¶¶‡¶ø‡¶ö‡ßç‡¶õ‡¶ø ‡¶®‡¶Æ‡ßÅ‡¶®‡¶æ ‡¶π‡¶ø‡¶∏‡ßá‡¶¨‡ßá‡•§  
// ‡¶§‡ßÅ‡¶Æ‡¶ø ‡¶ö‡¶æ‡¶á‡¶≤‡ßá ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶´‡¶æ‡¶á‡¶≤ ‡¶Ü‡¶≤‡¶æ‡¶¶‡¶æ ‡¶´‡¶æ‡¶á‡¶≤‡ßá ‡¶ö‡¶æ‡¶á‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßã ‡¶Ö‡¶•‡¶¨‡¶æ ‡¶ß‡¶æ‡¶™‡ßá ‡¶ß‡¶æ‡¶™‡ßá ‡¶¶‡¶ø‡¶§‡ßá ‡¶¨‡¶≤‡ßã‡•§

const activeQuiz = new Map();

module.exports.run = async function ({ api, event }) {
  const { threadID, messageID, senderID, body } = event;

  if (!activeQuiz.has(threadID)) {
    const qIndex = Math.floor(Math.random() * questions.length);
    const q = questions[qIndex];

    let msg = `üïå ‡¶á‡¶∏‡¶≤‡¶æ‡¶Æ‡¶ø‡¶ï ‡¶ï‡ßÅ‡¶á‡¶ú ‡¶∂‡ßÅ‡¶∞‡ßÅ!\n\n‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶®: ${q.question}\n`;
    q.options.forEach((opt, i) => {
      msg += `\n${i + 1}. ${opt}`;
    });
    msg += `\n\n‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶¶‡¶ø‡¶§‡ßá 1 ‡¶•‡ßá‡¶ï‡ßá 4 ‡¶è‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶è‡¶ï‡¶ü‡¶ø ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ ‡¶ü‡¶æ‡¶á‡¶™ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§`;

    activeQuiz.set(threadID, { questionIndex: qIndex, senderID });

    return api.sendMessage(msg, threadID, messageID);
  } else {
    const quizData = activeQuiz.get(threadID);
    if (senderID !== quizData.senderID) return;

    const userAnswer = parseInt(body);
    if (isNaN(userAnswer) || userAnswer < 1 || userAnswer > 4) {
      return api.sendMessage("‚ùå ‡¶¶‡¶Ø‡¶º‡¶æ ‡¶ï‡¶∞‡ßá 1 ‡¶•‡ßá‡¶ï‡ßá 4 ‡¶è‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶è‡¶ï‡¶ü‡¶ø ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡•§", threadID, messageID);
    }

    const correctAnswer = questions[quizData.questionIndex].answer;
    if (userAnswer === correctAnswer) {
      api.sendMessage("‚úÖ ‡¶∏‡¶†‡¶ø‡¶ï ‡¶â‡¶§‡ßç‡¶§‡¶∞! ‡¶Ü‡¶™‡¶®‡¶ø ‡¶≠‡¶æ‡¶≤‡ßã ‡¶ï‡¶∞‡ßá‡¶õ‡ßá‡¶®‡•§", threadID, messageID);
    } else {
      const correctOption = questions[quizData.questionIndex].options[correctAnswer - 1];
      api.sendMessage(`‚ùå ‡¶≠‡ßÅ‡¶≤ ‡¶â‡¶§‡ßç‡¶§‡¶∞! ‡¶∏‡¶†‡¶ø‡¶ï ‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶π‡¶≤: ${correctAnswer}. (${correctOption})`, threadID, messageID);
    }
    activeQuiz.delete(threadID);
  }
};
